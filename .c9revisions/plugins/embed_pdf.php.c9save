{"ts":1362854639747,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1362854644219,"patch":[[{"diffs":[[1,"<?php\n/*\nPlugin Name: DirtySuds - Embed PDF\nPlugin URI: http://dirtysuds.com\nDescription: Embed a PDF using Google Docs Viewer\nAuthor: Dirty Suds\nVersion: 1.04\nAuthor URI: http://blog.dirtysuds.com\nLicense: GPL2\n\nUpdates:\n1.04 20111125 - Automatically enable auto-embeds on activation\n1.03 20110321 - Automatically enable auto-embeds on activation\n1.02 20110315 - Added support for `gdoc` shortcode\n1.01 20110303 - Added support for class and ID attributes\n1.00 20110224 - First Version\n\n  Copyright 2011 Pat Hawks  (email : pat@pathawks.com)\n\n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation; either version 2 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program; if not, write to the Free Software\n    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n*/\n\n\nregister_activation_hook( __FILE__, 'dirtysuds_embed_pdf_enable_embeds' );\nwp_embed_register_handler( 'pdf', '#(^(http|wpurl)\\:\\/\\/.+\\.pdf$)#i', 'dirtysuds_embed_pdf' );\nadd_shortcode( 'gdoc', 'dirtysuds_embed_pdf' );\n\nfunction dirtysuds_embed_pdf_enable_embeds() {\n    update_option('embed_autourls',1);\n}\n\nfunction dirtysuds_embed_pdf( $matches, $atts, $url, $rawattr=null ) {\n\textract( shortcode_atts( array(\n\t\t'height' => get_option('embed_size_h'),\n\t\t'width' => get_option('embed_size_w'),\n\t\t'border' => '0',\n\t\t'style' => '',\n\t\t'title' => '',\n\t\t'class' => 'pdf',\n\t\t'id' => '',\n\t), $atts ) );\n\t\n\tif (!strstr($url,'http://') && strstr($atts,'http://')) {\n\t\t$url = $atts;\n\t\textract( shortcode_atts( array(\n\t\t\t'height' => get_option('embed_size_h'),\n\t\t\t'width' => get_option('embed_size_w'),\n\t\t\t'border' => '0',\n\t\t\t'style' => '',\n\t\t\t'title' => '',\n\t\t\t'class' => 'pdf',\n\t\t\t'id' => '',\n\t\t), $matches ) );\n\t}\n\n\t$embed = '<iframe src=\"http://docs.google.com/viewer?url='.urlencode($url).'&amp;embedded=true\" class=\"'.$class.'\"';\n\tif ($id) {\n\t\t$embed .= ' id=\"'.$id.'\"';\n\t}\n\t\n\t$embed .= ' frameborder=\"'.$border.'\"';\n\tif ($border != '0') {\n\t\t$border .= 'px';\n\t}\n\t\n\tif ($style) {\n\t\t$embed .= ' style=\"height:'.$height.'px;width:'.$width.'px;border:'.$border.';'.$style.'\"';\n\t} else {\n\t\t$embed .= ' style=\"height:'.$height.'px;width:'.$width.'px;border:'.$border.'\"';\n\t}\n\tif ($title) {\n\t\t$embed .= ' title=\"'.$title.'\"';\n\t}\n\t$embed .= ' width=\"'.$width.'\" height=\"'.$height.'\"></iframe>';\n\t\n\t$embed  = '<![if !IE]>'.$embed.'<![endif]>';\n\n\t$embed .= '<!--[if IE]>'.\n\t\t'<object width=\"'.$width.'\" height=\"'.$height.'\" type=\"application/pdf\" data=\"'.$url.'\" class=\"'.$class.' ie\"';\n\n\tif ($id) {\n\t\t$embed .= ' id=\"'.$id.'\"';\n\t}\n\t\n\t$embed .= '>'.\n\t\t'<div style=\"width:'.$width.';height:'.$height.';text-align:center;background:#fff;color:#000;margin:0;border:0;padding:0\">Unable to display the document at this time<br /><a href=\"'.$url.'\">Click here to download</a></div>'.\n\t\t'</object>'.\n\t\t'<![endif]-->';\t\n\n\treturn apply_filters( 'embed_pdf', $embed, $matches, $attr, $url, $rawattr  );\n}\n\nfunction dirtysuds_embed_pdf_rate($links,$file) {\n\t\tif (plugin_basename(__FILE__) == $file) {\n\t\t\t$links[] = '<a href=\"http://wordpress.org/extend/plugins/dirtysuds-embed-pdf/\">Rate this plugin</a>';\n\t\t}\n\treturn $links;\n}\nadd_filter('plugin_row_meta', 'dirtysuds_embed_pdf_rate',10,2);"]],"start1":0,"start2":0,"length1":0,"length2":3636}]],"length":3636,"saved":false}
